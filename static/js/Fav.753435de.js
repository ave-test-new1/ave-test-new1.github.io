(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Fav"],{"0f55":function(e,t,i){"use strict";i("e6ed")},"590f":function(e,t,i){"use strict";i("ad99")},"793c":function(e,t,i){"use strict";i("d840")},8363:function(e,t,i){"use strict";var o=i("7a23"),n={class:"popup-title"},c={class:"footer"};function r(e,t,i,r,a,s){var l=Object(o["resolveComponent"])("van-field"),u=Object(o["resolveComponent"])("van-button"),d=Object(o["resolveComponent"])("van-form"),p=Object(o["resolveComponent"])("van-popup");return Object(o["openBlock"])(),Object(o["createBlock"])(p,{show:s.dialogVisible,"onUpdate:show":t[2]||(t[2]=function(e){return s.dialogVisible=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h3",n,Object(o["toDisplayString"])(e.$t("editRemark")),1),Object(o["createVNode"])(d,{class:"popup-content",onSubmit:s.onSubmit},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.title=e}),label:"",placeholder:e.$t("maximum50characters"),clearable:"",rules:a.rules},null,8,["modelValue","placeholder","rules"]),Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(u,{class:"btn",type:"default",round:"",onClick:t[1]||(t[1]=function(e){return s.dialogVisible=!1})},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("cancel")),1)]})),_:1}),Object(o["createVNode"])(u,{class:"btn","native-type":"submit",type:"primary",round:""},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("confirm1")),1)]})),_:1})])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])}var a={name:"EditRemark",props:{visible:Boolean,confirmSubmit:Function,initRemark:String},emits:["update:visible","onSubmit"],data:function(){var e=function(e){return(null===e||void 0===e?void 0:e.length)<=50};return{title:this.initRemark||"",rules:[{required:!0,message:this.$t("enterRemark")},{validator:e,message:this.$t("maximum50characters")}]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},watch:{visible:function(e){e&&(this.title=this.initRemark||"")}},methods:{onSubmit:function(){this.confirmSubmit(this.title)}}},s=(i("0f55"),i("6b0d")),l=i.n(s);const u=l()(a,[["render",r],["__scopeId","data-v-413dca5e"]]);t["a"]=u},ad99:function(e,t,i){},d51a:function(e,t,i){"use strict";i.r(t);i("b0c0");var o=i("7a23"),n=function(e){return Object(o["pushScopeId"])("data-v-2cb8d1c1"),e=e(),Object(o["popScopeId"])(),e},c={class:"fav-tabs-container"},r={key:0,class:"tag"},a=n((function(){return Object(o["createElementVNode"])("i",{class:"iconfont icon-edit"},null,-1)}));function s(e,t,i,n,s,l){var u=Object(o["resolveComponent"])("van-tab"),d=Object(o["resolveComponent"])("van-tabs"),p=Object(o["resolveComponent"])("router-link"),b=Object(o["resolveComponent"])("favorite-list"),f=Object(o["resolveComponent"])("nft-favorite-list");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(d,{class:"fav-tabs",active:s.activeGroup,"onUpdate:active":t[0]||(t[0]=function(e){return s.activeGroup=e}),color:"#558BED",ellipsis:!1,background:"transparent"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.groups,(function(t,i){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:i,title:0!==t.group_id?t.name:e.$t("defaultGroup"),name:t.id},{title:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(0!==t.group_id?t.name:e.$t("defaultGroup"))+" ",1),"nft"===t.type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",r,"nft")):Object(o["createCommentVNode"])("",!0)]})),_:2},1032,["title","name"])})),128))]})),_:1},8,["active"]),Object(o["createVNode"])(p,{class:"btn-manage",to:{name:"FavoriteManage",params:{id:"1",type:l.activeType}}},{default:Object(o["withCtx"])((function(){return[a]})),_:1},8,["to"])]),"1"===l.activeType?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:0,tableList:s.favoritesList,isFavorites:"",activeGroup:l.activeGroupId,onRefresh:l.handleRefresh,onLoadMore:l.handleLoadMore},null,8,["tableList","activeGroup","onRefresh","onLoadMore"])):Object(o["createCommentVNode"])("",!0),"2"===l.activeType?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:1,tableList:s.nftFavoritesList,isFavorites:!1,activeGroup:l.activeGroupId,onRefresh:l.getUserNftFavorites},null,8,["tableList","activeGroup","onRefresh"])):Object(o["createCommentVNode"])("",!0)],64)}var l=i("2909"),u=i("1da1"),d=i("5530"),p=(i("96cf"),i("4de4"),i("d3b7"),i("a9e3"),i("ac1f"),i("1276"),i("d81d"),i("7db0"),i("99af"),i("365c")),b={class:"table"},f={class:"table-list"},v={class:"table-item table-header"},h={class:"table-item_d"},m={class:"icon-sort-container"},g={class:"icon-sort-container"},j=["onClick","onTouchstart"],O={class:"token-info table-item_d"},k={class:"icon-token-container"},y=["src"],$={class:"token-symbol"},w={class:"van-ellipsis",style:{"max-width":"100px"}},S=["onClick"],_={class:"table-item_d"},C={class:"table-item_d"};function N(e,t,i,n,c,r){var a=Object(o["resolveComponent"])("loading"),s=Object(o["resolveComponent"])("van-image"),l=Object(o["resolveComponent"])("van-button"),u=Object(o["resolveComponent"])("van-popover"),d=Object(o["resolveComponent"])("van-list"),p=Object(o["resolveComponent"])("van-empty"),N=Object(o["resolveComponent"])("ChangeGroup"),B=Object(o["resolveComponent"])("EditRemark"),V=Object(o["resolveDirective"])("animation-trigger");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",b,[Object(o["createVNode"])(a,{active:r.isLoading,"onUpdate:active":t[0]||(t[0]=function(e){return r.isLoading=e}),"can-cancel":!1,loader:"dots",opacity:.2,backgroundColor:"#000",color:"#558BED","is-full-page":!1},null,8,["active","opacity"]),Object(o["createElementVNode"])("ul",f,[Object(o["createElementVNode"])("li",v,[Object(o["createElementVNode"])("span",h,Object(o["toDisplayString"])(e.$t("token")),1),Object(o["createElementVNode"])("div",{class:"table-item_d",onClick:t[3]||(t[3]=function(e){return r.switchSort("current_price_usd")})},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("lastPrice"))+"($)",1),Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-up",{active:1===c.activeSort&&"current_price_usd"===c.sortBy}]),onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(e){c.activeSort=1,c.sortBy="current_price_usd"}),["stop"]))},null,2),Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-down",{active:-1===c.activeSort&&"current_price_usd"===c.sortBy}]),onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(e){c.activeSort=-1,c.sortBy="current_price_usd"}),["stop"]))},null,2)])]),Object(o["createElementVNode"])("div",{class:"table-item_d",onClick:t[6]||(t[6]=function(e){return r.switchSort("price_change")})},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("change")),1),Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-up",{active:1===c.activeSort&&"price_change"===c.sortBy}]),onClick:t[4]||(t[4]=Object(o["withModifiers"])((function(e){c.activeSort=1,c.sortBy="price_change"}),["stop"]))},null,2),Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-down",{active:-1===c.activeSort&&"price_change"===c.sortBy}]),onClick:t[5]||(t[5]=Object(o["withModifiers"])((function(e){c.activeSort=-1,c.sortBy="price_change"}),["stop"]))},null,2)])])]),Object(o["createVNode"])(d,{loading:c.listLoading,"onUpdate:loading":t[10]||(t[10]=function(e){return c.listLoading=e}),error:c.listError,"onUpdate:error":t[11]||(t[11]=function(e){return c.listError=e}),finished:c.finished,"error-text":e.$t("errorText"),"loading-text":e.$t("loading"),"finished-text":e.$t("noMore"),onLoad:r.onLoad,offset:"100","immediate-check":!1},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.tableListSort,(function(i){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:i.id,show:c.showPopover[i.id],"onUpdate:show":function(e){return c.showPopover[i.id]=e},actions:r.actions(i.id),theme:"dark",trigger:"click",overlay:"","overlay-style":{"background-color":"transparent"},onSelect:function(e){return r.onSelect(i,e)}},{reference:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"table-item",onClick:Object(o["withModifiers"])((function(e){return r.tableRowClick(i)}),["stop","prevent"]),onContextmenu:t[7]||(t[7]=Object(o["withModifiers"])((function(){}),["prevent"])),onTouchstart:function(e){return r.longTap(i)},onTouchmove:t[8]||(t[8]=function(){return r.clearTouch&&r.clearTouch.apply(r,arguments)}),onTouchend:t[9]||(t[9]=function(){return r.clearTouch&&r.clearTouch.apply(r,arguments)})},[Object(o["createElementVNode"])("div",O,[Object(o["createElementVNode"])("div",k,[(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:i.token+i.network,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(i),"error-icon":e.$f.formatDefaultIcon(i)},null,8,["src","error-icon"])),i.network?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.network,".png"),alt:"",srcset:""},null,8,y)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("span",w,Object(o["toDisplayString"])(i.symbol),1),i.remark?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn-remark van-ellipsis",onClick:Object(o["withModifiers"])((function(e){return r.handleEditRemark(i)}),["stop","prevent"])},Object(o["toDisplayString"])(i.remark),9,S)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",_,Object(o["toDisplayString"])(e.$f.formatNumber2(i.current_price_usd||0)),1),Object(o["createElementVNode"])("div",C,[i.price_change&&i.price_change>=0?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,class:"button-priceChange",color:e.$store.getters.upColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("+"+Object(o["toDisplayString"])(i.price_change||0)+"%",1)]})),_:2},1032,["color"])):(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,class:"button-priceChange",color:e.$store.getters.downColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(i.price_change||0)+"%",1)]})),_:2},1032,["color"]))])],40,j)),[[V,i.current_price_usd,"animation-bg"]])]})),_:2},1032,["show","onUpdate:show","actions","onSelect"])})),128))]})),_:1},8,["loading","error","finished","error-text","loading-text","finished-text","onLoad"]),Object(o["withDirectives"])(Object(o["createVNode"])(p,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],r.tableListSort&&0===r.tableListSort.length&&!i.loading]])]),Object(o["createVNode"])(N,{visible:c.visible,"onUpdate:visible":t[12]||(t[12]=function(e){return c.visible=e}),selected:r.curGroup,"onUpdate:selected":t[13]||(t[13]=function(e){return r.curGroup=e}),title:e.$t("pleaseSelectGroup"),groups:r.groups,onSelect:r.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),Object(o["createVNode"])(B,{visible:c.visible4,"onUpdate:visible":t[14]||(t[14]=function(e){return c.visible4=e}),initRemark:c.curRemark,confirmSubmit:r.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])])}var B=i("ade3"),V=(i("fb6a"),i("4e82"),i("c740"),i("caad"),i("2532"),i("c3ff")),E=i("8363"),L=i("af58"),x={name:"FavoriteList",props:{tableList:Array,loading:{type:Boolean,default:!1},activeGroup:{type:Number,default:0},isFavorites:{type:Boolean,default:!0}},emits:["update:activeGroup","refresh"],components:Object(B["a"])({ChangeGroup:V["a"],EditRemark:E["a"]},L["a"].name,L["a"]),data:function(){return{showPopover:{},timer:null,listLoading:!1,listError:!1,finished:!1,list:[],selectedToken:{},visible:!1,activeSort:0,sortBy:"",visible4:!1,curRemark:"",curToken:{},pageSize:20,currentPage:1}},computed:{isLoading:function(){return this.loading},isFinished:function(){return this.finished},groups:function(){return this.$store.state.userFavoriteGroups},curGroup:{get:function(){return this.activeGroup},set:function(e){this.$emit("update:activeGroup",e)}},tableListSort:function(){var e=this;if(0===this.activeSort||""===this.sortBy)return this.tableList;var t=this.tableList.slice(0);return t.sort((function(t,i){return((t[e.sortBy]||0)-(i[e.sortBy]||0))*e.activeSort}))}},methods:{actions:function(e){var t,i,o,n,c=this.tableList.findIndex((function(t){return t.id===e}));return[{text:this.$t("top"),id:0,disabled:0===c},{text:this.$t("up"),id:null===(t=this.tableList)||void 0===t||null===(i=t[c-1])||void 0===i?void 0:i.id,disabled:0===c},{text:this.$t("down"),id:null===(o=this.tableList)||void 0===o||null===(n=o[c+1])||void 0===n?void 0:n.id,disabled:c===this.tableList.length-1},{text:this.$t("move"),id:"move",disabled:!1},{text:this.$t("remark"),id:"remark",disabled:!1},{text:this.$t("delete"),id:"delete",disabled:!1}]},tableRowClick:function(e){var t,i,o,n;"brc20"===e.chain||null!==e&&void 0!==e&&null!==(t=e.token)&&void 0!==t&&null!==(i=t.includes)&&void 0!==i&&i.call(t,"inscription")||null!==e&&void 0!==e&&null!==(o=e.token)&&void 0!==o&&null!==(n=o.includes)&&void 0!==n&&n.call(o,"(")||"runes"===e.chain?this.$router.push({name:"Brc",params:{type:"token",id:e.id}}):this.$router.push({name:"Token",params:{type:"token",id:e.id}})},longTap:function(e){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.timer=null,t.showPopover[e.id]=!0}),800)},clearTouch:function(){this.timer&&clearTimeout(this.timer)},onSelect:function(e,t){var i=this;if(this.$f.verifyLogin())if("move"===t.id)this.switchGroup(e);else if("delete"===t.id)this.removeFavorite(e);else if("remark"===t.id)this.handleEditRemark(e);else if(0===t.id){var o=this.$toast.loading({forbidClick:!0,duration:0});Object(p["q"])(e.id,this.activeGroup).then((function(){i.$emit("refresh"),i.$notify({type:"success",message:i.$t("success")})})).catch((function(e){i.$notify({type:"danger",message:i.$t("fail")})})).finally((function(){o.clear()}))}else{var n=this.$toast.loading({forbidClick:!0,duration:0});Object(p["p"])(e.id,t.id,this.activeGroup).then((function(){i.$emit("refresh"),i.$notify({type:"success",message:i.$t("success")})})).catch((function(e){i.$notify({type:"danger",message:i.$t("fail")})})).finally((function(){n.clear()}))}},switchGroup:function(e){this.selectedToken=e,this.visible=!0},confirmSwitchGroup:function(e){var t=this;if(this.$f.verifyLogin())if(this.activeGroup!==e){var i=this.$toast.loading({forbidClick:!0,duration:0});Object(p["ld"])(this.selectedToken.token+"-"+this.selectedToken.chain,e).then((function(){t.$emit("refresh"),t.$notify({type:"success",message:t.$t("success")}),t.visible=!1})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))}else this.visible=!1},removeFavorite:function(e){var t=this,i=this.$toast.loading({forbidClick:!0,duration:0});Object(p["pd"])(e.id).then((function(){t.$emit("refresh"),t.$store.dispatch("getUserFavorites"),t.$notify({type:"success",message:t.$t("success")}),t.visible1=!1})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))},switchSort:function(e){if(this.sortBy!==e)return this.sortBy=e,void(this.activeSort=1);this.activeSort++,this.activeSort>1&&(this.activeSort=-1)},handleEditRemark:function(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark:function(e){var t=this;if(this.$f.verifyLogin()){var i=this.$toast.loading({forbidClick:!0,duration:0}),o=this.curToken.token+"-"+this.curToken.chain;Object(p["E"])(o,e).then((function(){t.$emit("refresh"),t.visible4=!1,t.$notify({type:"success",message:t.$t("success")})})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))}},onLoad:function(){var e=this;this.$emit("loadMore",{page:this.currentPage,pageSize:this.pageSize,callback:function(t,i){e.listLoading=!1,e.finished=!t,e.listError=i,t&&e.currentPage++}})},resetState:function(){this.finished=!1,this.listLoading=!1,this.currentPage=1}},deactivated:function(){this.resetState()}},T=(i("e780"),i("6b0d")),G=i.n(T);const F=G()(x,[["render",N],["__scopeId","data-v-2419cd16"]]);var R=F,D=function(e){return Object(o["pushScopeId"])("data-v-55609294"),e=e(),Object(o["popScopeId"])(),e},U={class:"table"},P={class:"table-list"},z={class:"table-item table-header"},M=D((function(){return Object(o["createElementVNode"])("span",{class:"table-item_d"},"NFT",-1)})),I={class:"icon-sort-container"},A={class:"icon-sort-container"},q=["onClick","onTouchstart"],J={class:"token-info table-item_d"},Q={class:"icon-token-container"},W=["src"],H={class:"token-symbol"},K={class:"token-symbol van-multi-ellipsis--l2"},X=["onClick"],Y={class:"table-item_d"},Z=Object(o["createTextVNode"])(" -- "),ee={class:"table-item_d"},te=Object(o["createTextVNode"])(" -- ");function ie(e,t,n,c,r,a){var s,l=Object(o["resolveComponent"])("loading"),u=Object(o["resolveComponent"])("van-image"),d=Object(o["resolveComponent"])("van-button"),p=Object(o["resolveComponent"])("van-popover"),b=Object(o["resolveComponent"])("DynamicScrollerItem"),f=Object(o["resolveComponent"])("DynamicScroller"),v=Object(o["resolveComponent"])("van-empty"),h=Object(o["resolveComponent"])("ChangeGroup"),m=Object(o["resolveComponent"])("EditRemark");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",U,[Object(o["createVNode"])(l,{active:a.isLoading,"onUpdate:active":t[0]||(t[0]=function(e){return a.isLoading=e}),"can-cancel":!1,loader:"dots",opacity:.2,backgroundColor:"#000",color:"#558BED","is-full-page":!1},null,8,["active","opacity"]),Object(o["createElementVNode"])("ul",P,[Object(o["createElementVNode"])("li",z,[M,Object(o["createElementVNode"])("div",{class:"table-item_d",onClick:t[3]||(t[3]=function(e){return a.switchSort("price")})},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("lastPrice")),1),Object(o["createElementVNode"])("div",I,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-up",{active:1===r.activeSort&&"price"===r.sortBy}]),onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(e){r.activeSort=1,r.sortBy="price"}),["stop"]))},null,2),Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-down",{active:-1===r.activeSort&&"price"===r.sortBy}]),onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(e){r.activeSort=-1,r.sortBy="price"}),["stop"]))},null,2)])]),Object(o["createElementVNode"])("div",{class:"table-item_d",onClick:t[6]||(t[6]=function(e){return a.switchSort("price_change")})},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("change")),1),Object(o["createElementVNode"])("div",A,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-up",{active:1===r.activeSort&&"price_change"===r.sortBy}]),onClick:t[4]||(t[4]=Object(o["withModifiers"])((function(e){r.activeSort=1,r.sortBy="price_change"}),["stop"]))},null,2),Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])(["iconfont icon-sort-down",{active:-1===r.activeSort&&"price_change"===r.sortBy}]),onClick:t[5]||(t[5]=Object(o["withModifiers"])((function(e){r.activeSort=-1,r.sortBy="price_change"}),["stop"]))},null,2)])])]),(null===(s=a.tableListSort)||void 0===s?void 0:s.length)>0?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,items:a.tableListSort,"min-item-size":30,"key-field":"id","page-mode":"",class:"scroller"},{default:Object(o["withCtx"])((function(n){var c=n.item,s=n.index,l=n.active;return[Object(o["createVNode"])(b,{item:c,active:l,"data-index":s},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{show:r.showPopover[c.id],"onUpdate:show":function(e){return r.showPopover[c.id]=e},actions:a.actions(c.id),theme:"dark",trigger:"click",overlay:"","overlay-style":{"background-color":"transparent"},onSelect:function(e){return a.onSelect(c,e)}},{reference:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("li",{class:"table-item",onClick:Object(o["withModifiers"])((function(e){return a.tableRowClick(c)}),["stop","prevent"]),onContextmenu:t[7]||(t[7]=Object(o["withModifiers"])((function(){}),["prevent"])),onTouchstart:function(e){return a.longTap(c)},onTouchmove:t[8]||(t[8]=function(){return a.clearTouch&&a.clearTouch.apply(a,arguments)}),onTouchend:t[9]||(t[9]=function(){return a.clearTouch&&a.clearTouch.apply(a,arguments)})},[Object(o["createElementVNode"])("div",J,[Object(o["createElementVNode"])("div",Q,[(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:s,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:e.$f.formatImage(null===c||void 0===c?void 0:c.logo),"error-icon":i("aeccf")},null,8,["src","error-icon"])),null!==c&&void 0!==c&&c.network||null!==c&&void 0!==c&&c.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat((null===c||void 0===c?void 0:c.network)||(null===c||void 0===c?void 0:c.chain),".png"),alt:"",srcset:""},null,8,W)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",H,[Object(o["createElementVNode"])("span",K,Object(o["toDisplayString"])(c.name),1),c.remark?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"btn-remark van-ellipsis",onClick:Object(o["withModifiers"])((function(e){return a.handleEditRemark(c)}),["stop","prevent"])},Object(o["toDisplayString"])(c.remark),9,X)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",Y,[null!==c&&void 0!==c&&c.price_m?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$f.formatNumber2(null===c||void 0===c?void 0:c.price_m,3,10))+" "+Object(o["toDisplayString"])(null===c||void 0===c?void 0:c.token_symbol),1)],64)):null!==c&&void 0!==c&&c.floor_price_m?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$f.formatNumber2(null===c||void 0===c?void 0:c.floor_price_m,3,10))+" "+Object(o["toDisplayString"])(null===c||void 0===c?void 0:c.token_symbol),1)],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:2},[Z],64))]),Object(o["createElementVNode"])("div",ee,[c.price_m?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[c.price_change&&c.price_change>=0?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,class:"button-priceChange",color:e.$store.getters.upColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("+ "+Object(o["toDisplayString"])(c.price_change+"%"||!1),1)]})),_:2},1032,["color"])):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,class:"button-priceChange",color:e.$store.getters.downColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.price_change+"%"||!1),1)]})),_:2},1032,["color"]))],64)):c.floor_price_m?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[c.floor_price_change&&c.floor_price_change>=0?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,class:"button-priceChange",color:e.$store.getters.upColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("+ "+Object(o["toDisplayString"])(c.floor_price_change+"%"||!1),1)]})),_:2},1032,["color"])):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,class:"button-priceChange",color:e.$store.getters.downColor[3],size:"mini"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(c.floor_price_change+"%"||!1),1)]})),_:2},1032,["color"]))],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:2},[te],64))])],40,q)]})),_:2},1032,["show","onUpdate:show","actions","onSelect"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])(v,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],a.tableListSort&&0===a.tableListSort.length&&!a.isLoading||!a.tableListSort]])]),Object(o["createVNode"])(h,{visible:r.visible,"onUpdate:visible":t[10]||(t[10]=function(e){return r.visible=e}),selected:a.curGroup,"onUpdate:selected":t[11]||(t[11]=function(e){return a.curGroup=e}),title:e.$t("pleaseSelectGroup"),groups:a.groups,type:"2",onSelect:a.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),Object(o["createVNode"])(m,{visible:r.visible4,"onUpdate:visible":t[12]||(t[12]=function(e){return r.visible4=e}),initRemark:r.curRemark,confirmSubmit:a.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])])}var oe={name:"NFtList",props:{tableList:Array,loading:{type:Boolean,default:!1},activeGroup:{type:Number,default:0},isFavorites:{type:Boolean,default:!0},isVirtualScroller:{type:Boolean,default:!1}},emits:["update:activeGroup","refresh"],components:{ChangeGroup:V["a"],EditRemark:E["a"]},data:function(){return{activeSort:0,sortBy:"",selectedToken:{},visible:!1,showPopover:{},timer:null,curRemark:"",curToken:{},visible4:!1}},computed:{isLoading:function(){return this.loading},groups:function(){return this.$store.state.userNftFavoriteGroups},curGroup:{get:function(){return this.activeGroup},set:function(e){this.$emit("update:activeGroup",e)}},tableListSort:function(){var e=this;if(0===this.activeSort||""===this.sortBy)return this.tableList;var t=this.tableList.slice(0);return"price"===this.sortBy?t.sort((function(t,i){return(((null===t||void 0===t?void 0:t.price_m)||(null===t||void 0===t?void 0:t.floor_price_m)||0)-((null===i||void 0===i?void 0:i.price_m)||(null===i||void 0===i?void 0:i.floor_price_m)||0))*e.activeSort})):t.sort((function(t,i){return(((null===t||void 0===t?void 0:t.price_change)||(null===t||void 0===t?void 0:t.floor_price_change)||0)-((null===i||void 0===i?void 0:i.price_change)||(null===i||void 0===i?void 0:i.floor_price_change)||0))*e.activeSort}))}},methods:{actions:function(e){var t,i,o,n,c=this.tableList.findIndex((function(t){return t.id===e}));return[{text:this.$t("top"),id:0,disabled:0===c},{text:this.$t("up"),id:null===(t=this.tableList)||void 0===t||null===(i=t[c-1])||void 0===i?void 0:i.id,disabled:0===c},{text:this.$t("down"),id:null===(o=this.tableList)||void 0===o||null===(n=o[c+1])||void 0===n?void 0:n.id,disabled:c===this.tableList.length-1},{text:this.$t("move"),id:"move",disabled:!1},{text:this.$t("remark"),id:"remark",disabled:!1},{text:this.$t("delete"),id:"delete",disabled:!1}]},longTap:function(e){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.timer=null,t.showPopover[e.id]=!0}),800)},clearTouch:function(){this.timer&&clearTimeout(this.timer)},onSelect:function(e,t){var i=this;if(this.$f.verifyLogin())if("move"===t.id)this.switchGroup(e);else if("delete"===t.id)this.removeNftFavorite(e);else if("remark"===t.id)this.handleEditRemark(e);else if(0===t.id){var o=this.$toast.loading({forbidClick:!0,duration:0});Object(p["v"])(e.id,this.activeGroup).then((function(){i.$emit("refresh"),i.$notify({type:"success",message:i.$t("success")})})).catch((function(e){i.$notify({type:"danger",message:i.$t("fail")})})).finally((function(){o.clear()}))}else{var n=this.$toast.loading({forbidClick:!0,duration:0});Object(p["u"])(e.id,t.id,this.activeGroup).then((function(e){i.$emit("refresh"),i.$notify({type:"success",message:i.$t("success")})})).catch((function(e){i.$notify({type:"danger",message:i.$t("fail")})})).finally((function(){n.clear()}))}},collect:function(e){this.$store.dispatch("collect",e)},tableRowClick:function(e){this.$router.push({name:"NFT",params:{id:e.id+"-"+e.chain},query:{floor:e.floor_price_m>0?1:0}})},switchGroup:function(e){this.selectedToken=e,this.visible=!0},confirmSwitchGroup:function(e){var t=this;if(this.$f.verifyLogin())if(this.activeGroup!==e){var i=this.$toast.loading({forbidClick:!0,duration:0});Object(p["md"])(this.selectedToken.id,e).then((function(e){t.$emit("refresh"),t.$notify({type:"success",message:t.$t("success")}),t.visible=!1})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))}else this.visible=!1},removeNftFavorite:function(e){var t=this,i=this.$toast.loading({forbidClick:!0,duration:0});Object(p["td"])(e.id).then((function(){t.$emit("refresh"),t.$store.dispatch("getUserFavorites"),t.$notify({type:"success",message:t.$t("success")}),t.visible1=!1})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))},switchSort:function(e){if(this.sortBy!==e)return this.sortBy=e,void(this.activeSort=1);this.activeSort++,this.activeSort>1&&(this.activeSort=-1)},handleEditRemark:function(e){this.curRemark=e.remark||"",this.curToken=e,this.visible4=!0},confirmEditRemark:function(e){var t=this;if(this.$f.verifyLogin()){var i=this.$toast.loading({forbidClick:!0,duration:0});Object(p["D"])(this.curToken.id,e).then((function(){t.$emit("refresh"),t.visible4=!1,t.$notify({type:"success",message:t.$t("success")})})).catch((function(e){t.$notify({type:"danger",message:t.$t("fail")})})).finally((function(){i.clear()}))}}}};i("793c");const ne=G()(oe,[["render",ie],["__scopeId","data-v-55609294"]]);var ce=ne,re={name:"Plate",components:{FavoriteList:R,NftFavoriteList:ce},data:function(){return{active:this.$route.params.id||"1",Timer:null,loading:!1,activeGroup:"0-1",activeNftGroup:0,favoritesList:[],nftFavoritesList:[]}},computed:{groups:function(){return(this.$store.state.userAllFavoriteGroups||[]).filter((function(e){return"token"===e.type}))},nftGroups:function(){return this.$store.state.userNftFavoriteGroups||[]},activeGroupId:function(){var e,t,i;return Number((null===(e=this.activeGroup)||void 0===e||null===(t=e.split)||void 0===t||null===(i=t.call(e,"-"))||void 0===i?void 0:i[0])||0)},activeType:function(){var e,t,i;return(null===(e=this.activeGroup)||void 0===e||null===(t=e.split)||void 0===t||null===(i=t.call(e,"-"))||void 0===i?void 0:i[1])||"1"}},watch:{"$store.state.signatureObj":{handler:function(){this.getUserFavoriteList()},deep:!0},activeGroup:function(){this.getUserFavoriteList()},activeNftGroup:function(){this.getUserFavoriteList()},groups:{handler:function(){this.activeGroup="0-1"},deep:!0},nftGroups:{handler:function(){this.activeNftGroup=0},deep:!0},"$store.state.currentAccount":function(e){e&&"Fav"===this.$route.name&&this.getUserFavoriteList()},"$store.state.ws.isConnected":function(e){var t;e&&((null===(t=this.$store.state.ws.multiPriceParams)||void 0===t?void 0:t.main.length)>0&&this.$store.dispatch("subMultiPrice"))},"$store.state.ws.multiPriceResult":function(e){var t=this.favoritesList.map((function(t){var i=e.find((function(e){return e.token_id===t.id}));return i?Object(d["a"])(Object(d["a"])({},t),{},{current_price_usd:i.price,price_change:i.price_change,direction:(null===i||void 0===i?void 0:i.direction)||"down"}):t}));this.favoritesList=t}},beforeRouteLeave:function(){this.$store.dispatch("unSubMultiPrice")},activated:function(){this.init()},methods:{init:function(){this.getUserFavoriteList()},handleLoadMore:function(e){this.getUserFavorites(e)},getUserFavoriteList:function(){"1"===this.activeType?this.getUserFavorites():"2"===this.activeType&&this.getUserNftFavorites()},handleRefresh:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=e.callback,i.prev=1,i.next=4,t.getUserFavorites({page:1,pageSize:20});case 4:return i.prev=4,o&&o(),i.finish(4);case 7:case"end":return i.stop()}}),i,null,[[1,,4,7]])})))()},getUserFavorites:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var o,n,c,r,a,s,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=e.length>0&&void 0!==e[0]?e[0]:{page:1,pageSize:20,callback:null},i.prev=1,c=[],r=!1,i.prev=4,i.next=7,Object(p["xb"])(t.activeGroupId,o.page);case 7:c=i.sent,r=!1,i.next=16;break;case 11:return i.prev=11,i.t0=i["catch"](4),t.favoritesList=[],o.callback&&o.callback(!1,!0),i.abrupt("return");case 16:if(a=c.map((function(e){return Object(d["a"])(Object(d["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token,network:e.chain,priceChange24h:null!==e&&void 0!==e&&e.price_change?(null===e||void 0===e?void 0:e.price_change)/100:0,priceUSD:(null===e||void 0===e?void 0:e.current_price_usd)||0,collected:!0,price_change:"brc20"==(null===e||void 0===e?void 0:e.chain)?e.price_change_v2:e.price_change})})),1===o.page?t.favoritesList=a:t.favoritesList=[].concat(Object(l["a"])(t.favoritesList),Object(l["a"])(a)),s=null===(n=t.favoritesList)||void 0===n?void 0:n.map((function(e){return"".concat(e.token,"-").concat(e.chain)})),1!==o.page||0!==c.length){i.next=21;break}return i.abrupt("return");case 21:u=0!==a.length,o.callback&&o.callback(u,r),t.$store.commit("setWsState",{name:"multiPriceParams",value:Object(d["a"])(Object(d["a"])({},t.$store.state.ws.multiPriceParams),{main:s})}),t.$store.dispatch("subMultiPrice"),i.next=30;break;case 27:i.prev=27,i.t1=i["catch"](1),o.callback&&o.callback(!1,!0);case 30:case"end":return i.stop()}}),i,null,[[1,27],[4,11]])})))()},getUserNftFavorites:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["Qb"])(e.activeGroupId).catch(Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))));case 2:e.nftFavoritesList=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}};i("590f");const ae=G()(re,[["render",s],["__scopeId","data-v-2cb8d1c1"]]);t["default"]=ae},d840:function(e,t,i){},db42:function(e,t,i){},e6ed:function(e,t,i){},e780:function(e,t,i){"use strict";i("db42")}}]);